---
title: "Problem Set 4: Statistical Learning and DAGs"
---

**Due: 5pm on Friday, Feb 28.**


# 1. DAGs

For 1.1â€“1.5, answer True or False: X is a sufficient adjustment set to identify the causal effect of $A$ on $Y$. Recall that as you work on these problems, a good strategy is to first list all non-causal paths between $A$ and $Y$ and then cross out any that are blocked when conditioning on $X$.

![](pset4_dags.png)


# Part 2. Causal inference with statistical modeling

This problem is about the causal effect of motherhood on employment. The dataset `motherhood.csv` contains simulated data on a set of women.

* `treated` is the treatment which indicates motherhood (`TRUE`, birth in the last year before the observation) vs non-motherhood (`FALSE`, no birth before the observation)
* `employed` is the outcome, coded `TRUE` or `FALSE`

The data include a set of pre-treatment variables that we will consider a sufficient adjustment set

* `age` is age in years
* `sex` is a binary variable coded `Women` and `Men`
* `race` is a categorical variable coded `Hispanic`, `Non-Hispanic Black`, and `Non-Hispanic Non-Black`
* `employed_baseline` indicates being employed in the prior year, coded `TRUE` and `FALSE`
* `educ` is an ordinal variable for educational attainment, coded `Less than high school`, `High school`, `2-year degree`, and `4-year degree` with those with higher levels of education also coded in this last category
* `marital` is a categorical variable of marital status, coded `no_partner`, `cohabiting`, or `married`
* `fulltime` indicates full-time employment in the prior year
* `tenure` is years of experience with a current employer, as of the prior year
* `experience` is total years of full-time work experience, as of the prior year

Use the code below to load the data:

```{r}
#motherhood <- read_csv("../data_raw/motherhood.csv")
# motherhood <- readRDS("../data_raw/motherhood.RDS") |> filter(sex == "Women")
```

Estimate a linear model for employment among non-mothers.

* use `lm()` to estimate your model
* use this model formula: `

Use `lm()` to estimate your model.

```{r}
# model <- lm(
#   employed ~ race + employed_baseline + educ + marital + fulltime + tenure + experience,
#   data = motherhood |> filter(!treated),
#   w = w
# )
```

Make predictions from the model

```{r}
# predicted <- motherhood |>
#   filter(treated) |>
#   mutate(yhat0 = predict(model, newdata = motherhood |> filter(treated), type = "response")) |>
#   select(employed, yhat0, w)
```

Estimate the ATT.

```{r}
# predicted |>
#   summarize(estimate = weighted.mean(employed - yhat0, w = w))
```

To do: Think about the things that could go wrong

- used lm() instead of glm()
- did not use type = "response"
- did not use weights in outcome model
- did not use weights in summarize


